@HEADER-COMMENT@


@HEADER@
# obviously
BuildRequires:	gcc-c++
# we have a parser
BuildRequires:	flex bison
# needed for all yast packages
BuildRequires:	yast2-devtools
# testsuite
BuildRequires:	dejagnu
# autodocs
BuildRequires:	doxygen
# docbook docs
BuildRequires:	docbook-xsl-stylesheets libxslt
# catalog: convert URIs to local filenames
BuildRequires:	sgml-skel
# logging
# renamed: http://lists.opensuse.org/opensuse-packaging/2007-11/msg00076.html
BuildRequires:	libblocxx-devel
# libycp includes crypto built-ins
BuildRequires:  libxcrypt-devel

Summary:	-
Requires:	perl = %{perl_version}
Provides:	liby2util = 2.16.1
Obsoletes:	liby2util < 2.16.1

%description
-

@HEADER-DEVEL@
Summary:	-
Provides:	liby2util-devel = 2.16.1
Obsoletes:	liby2util-devel < 2.16.1
Requires:	libxcrypt-devel hwinfo-devel
Requires:	glibc-devel libstdc++-devel pcre-devel libblocxx-devel sysfsutils
# required for libscr
# for FlexLexer.h; I think that this dependency could be made
# private but it seems not worth the effort
Requires:	flex

%description devel
-

@PREP@

@BUILD@

@INSTALL@
mkdir -p "$RPM_BUILD_ROOT"@logdir@
%perl_process_packlist

@CLEAN@

%post
%run_ldconfig

%postun
%run_ldconfig

%files
%defattr(-,root,root)

%dir %{_libdir}/YaST2
%if "%_lib" == "lib64"
%dir /usr/lib/YaST2
%endif
%dir /usr/share/YaST2

%dir %attr(0700,root,root) @logdir@
%dir @ybindir@
%dir @plugindir@
%dir @scrconfdir@
%dir @execcompdir@/servers
%dir @execcompdir@/servers_non_y2

/usr/bin/ycpc
%{_libdir}/lib*.so.*
@ybindir@/y2base
@ybindir@/startshell
@ybindir@/tty_wrapper
@ybindir@/md_autorun
@ybindir@/elf-arch
@plugindir@/lib*.so.*
@scrconfdir@/*.scr
@execcompdir@/servers/scr
@execcompdir@/servers_non_y2/ag_*
# perl part (stdio agents)
# *: regular build compresses them, debug does not
%_mandir/man3/ycp.3pm*
%_mandir/man3/YaST::SCRAgent.3pm*
%{perl_vendorlib}/ycp.pm
%dir %{perl_vendorlib}/YaST
%{perl_vendorlib}/YaST/SCRAgent.pm
#  .packlist
%{perl_vendorarch}/auto/ycp
/var/adm/perl-modules/%name

%files devel
%defattr(-,root,root)
@ybindir@/ybcdump
%{_libdir}/lib*.so
%{_libdir}/lib*.la
@plugindir@/lib*.so
@plugindir@/lib*.la
@includedir@
@pkgconfigdir@/@RPMNAME@.pc
%doc @docdir@
%doc %{_datadir}/doc/yastdoc
@ydatadir@/devtools/bin/generateYCPWrappers
