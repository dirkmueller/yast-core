@HEADER-COMMENT@


@HEADER@
# obviously
BuildRequires:	gcc-c++
# we have a parser
BuildRequires:	flex bison
# needed for all yast packages
BuildRequires:	yast2-devtools
# used at "make check"
BuildRequires:	ElectricFence
# testsuite
BuildRequires:	dejagnu
# autodocs
BuildRequires:	doxygen
# docbook docs
BuildRequires:	docbook-xsl-stylesheets libxslt 
# catalog: convert URIs to local filenames
BuildRequires:	sgml-skel
# logging
BuildRequires:	blocxx-devel
# libycp includes crypto built-ins
BuildRequires:  libxcrypt-devel
# liby2:Y2SerialComponent needs term.h
BuildRequires:	ncurses-devel
# to be integrated
BuildRequires:	liby2util-devel
# probably pulled by liby2util
BuildRequires:	curl-devel

Summary:	-
# ag_hostnames: .net.hostnames (#264309)
Recommends:	netcat
Requires:	perl = %{perl_version}
# liby2util-2.11.5: ExternalCommand::renumber_fd
Requires:	liby2util >= 2.11.5
Provides:	libycp liby2 libyui libscr
Obsoletes:	libycp liby2 libyui libscr
Provides:	yast2-agent-any yast2-agent-ini yast2-agent-rcconfig
Obsoletes:	yast2-agent-any yast2-agent-ini yast2-agent-rcconfig
Provides:	yast2-agent-modules yast2-agent-system
Obsoletes:	yast2-agent-modules yast2-agent-system
Provides:	yast2-core-scr yast2-core-wfm yast2-core-translator
Obsoletes:	yast2-core-scr yast2-core-wfm yast2-core-translator
Provides:	y2base yast2-base y2translator y2xlator
Obsoletes:	y2base yast2-base y2translator y2xlator
Provides:	yast2-core-scr-soho yast2-lib64-compat
Obsoletes:	yast2-core-scr-soho yast2-lib64-compat

%description
-

@HEADER-DEVEL@
Summary:	-
Provides:	libycp:/usr/lib/YaST2/include/YCP.h
Provides:	liby2:/usr/lib/YaST2/include/Y2.h
Provides:	libyui:/usr/lib/YaST2/include/yui/YUIInterpreter.h
Provides:	libscr:/usr/lib/YaST2/include/SCR.h
Provides:	y2a_any y2a_mods y2a_hwpb y2scr y2wfm
Obsoletes:	y2a_any y2a_mods y2a_hwpb y2scr y2wfm
Provides:	libycp-devel liby2-devel libyui-devel libscr-devel
Obsoletes:	libycp-devel liby2-devel libyui-devel libscr-devel
Provides:	yast2-agent-any-devel yast2-agent-ini-devel
Obsoletes:	yast2-agent-any-devel yast2-agent-ini-devel
Provides:	yast2-agent-rcconfig-devel yast2-agent-modules-devel
Obsoletes:	yast2-agent-rcconfig-devel yast2-agent-modules-devel
Provides:	yast2-agent-system-devel
Obsoletes:	yast2-agent-system-devel
Provides:	yast2-core-scr-devel yast2-core-wfm-devel
Obsoletes:	yast2-core-scr-devel yast2-core-wfm-devel
Provides:	yast2-core-translator-devel
Obsoletes:	yast2-core-translator-devel
Provides:	yast2-core-scr-soho-devel
Obsoletes:	yast2-core-scr-soho-devel
Requires:	liby2util-devel
Requires:	libxcrypt-devel hwinfo-devel ncurses-devel
Requires:	glibc-devel libstdc++-devel pcre-devel blocxx-devel sysfsutils
# for FlexLexer.h; I think that this dependency could be made
# private but it seems not worth the effort
Requires:	flex

%description devel
-

@PREP@

@BUILD@

@INSTALL@
mkdir -p "$RPM_BUILD_ROOT"@logdir@
%perl_process_packlist

@CLEAN@

%post
%run_ldconfig

%postun
%run_ldconfig

%files
%defattr(-,root,root)

%dir %{_libdir}/YaST2
%if "%_lib" == "lib64"
%dir /usr/lib/YaST2
%endif
%dir /usr/share/YaST2

%dir %attr(0700,root,root) @logdir@
%dir @ybindir@
%dir @plugindir@
%dir @scrconfdir@
%dir @execcompdir@/servers
%dir @execcompdir@/servers_non_y2

/usr/bin/ycpc
%{_libdir}/lib*.so.*
@ybindir@/y2base
@ybindir@/startshell
@ybindir@/md_autorun
@ybindir@/elf-arch
@plugindir@/lib*.so.*
@scrconfdir@/*.scr
@execcompdir@/servers/scr
@execcompdir@/servers_non_y2/ag_*
# perl part (stdio agents)
# *: regular build compresses them, debug does not
%_mandir/man3/ycp.3pm*
%_mandir/man3/YaST::SCRAgent.3pm*
%{perl_vendorlib}/ycp.pm
%dir %{perl_vendorlib}/YaST
%{perl_vendorlib}/YaST/SCRAgent.pm
#  .packlist
%{perl_vendorarch}/auto/ycp
/var/adm/perl-modules/%name

%files devel
%defattr(-,root,root)
@ybindir@/ybcdump
%{_libdir}/lib*.so
%{_libdir}/lib*.la
@plugindir@/lib*.so
@plugindir@/lib*.la
@includedir@
@pkgconfigdir@/@RPMNAME@.pc
%doc @docdir@
@ydatadir@/devtools/bin/generateYCPWrappers
